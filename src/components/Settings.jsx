import React, { useEffect, useState } from 'react';
import useAuth from '../hooks/useAuth';
import { db } from '../firebase';
import { doc, setDoc } from 'firebase/firestore';
const KEY='notely_settings_v1';
export default function Settings({onClose}){ const {user}=useAuth(); const [theme,setTheme]=useState('light'); const [fontSize,setFontSize]=useState(16); useEffect(()=>{ try{ const raw=localStorage.getItem(KEY); if(raw){ const s=JSON.parse(raw); setTheme(s.theme||'light'); setFontSize(s.fontSize||16) } }catch(e){} },[]); useEffect(()=>localStorage.setItem(KEY, JSON.stringify({theme,fontSize})), [theme,fontSize]); const saveRemote=async()=>{ if(!user) return alert('로그인 필요'); await setDoc(doc(db,'users',user.uid,'meta','settings'), {theme,fontSize,updatedAt:Date.now()}); alert('설정 저장됨') }; return (<div className='p-4 border rounded bg-white'><h3 className='font-bold mb-2'>설정</h3><div className='mb-2'><label className='block text-xs'>테마</label><select value={theme} onChange={e=>setTheme(e.target.value)} className='p-2 border rounded'><option value='light'>Light</option><option value='dark'>Dark</option></select></div><div className='mb-2'><label className='block text-xs'>에디터 폰트 크기</label><input type='range' min='12' max='24' value={fontSize} onChange={e=>setFontSize(Number(e.target.value))} /><div className='text-xs'>현재: {fontSize}px</div></div><div className='flex gap-2'><button onClick={saveRemote} className='px-3 py-1 border rounded'>서버에 저장</button><button onClick={onClose} className='px-3 py-1 border rounded'>닫기</button></div></div>); }
